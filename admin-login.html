<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - INTZI</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Poppins',sans-serif;background:#f8f9ff;color:#222;}
.navbar{background:#5f64ec;color:#fff;padding:15px;text-align:center;font-weight:700;font-size:1.3em;}
.container{max-width:1150px;margin:30px auto;padding:0 14px;display:flex;gap:32px;}
.sidebar{background:#fff;border-radius:12px;padding:22px 18px;min-width:200px;box-shadow:0 3px 13px rgba(82,85,201,0.09);}
.sidebar label{font-weight:600;color:#5f64ec;display:block;margin-top:10px;}
.sidebar button, .sidebar select{width:98%;margin-top:10px;background:#5f64ec;color:#fff;padding:9px 0;border-radius:7px;border:none;font-weight:600;font-size:1.06em;margin-bottom:7px;cursor:pointer;}
.sidebar button:hover{background:#3637a5;}
.sidebar select{background:#fff;color:#222;border:1px solid #ccc;font-weight:normal;padding:7px;}
table{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 3px 12px rgba(0,0,0,0.09);}
th,td{padding:10px;border-bottom:1px solid #eee;text-align:left;}
th{background:#f1f2fa;color:#5f64ec;}
tr:hover{background:#f9f9ff;}
select.actionSelect{padding:4px;border-radius:6px;border:1px solid #ccc;}
#addForm{display:none;background:#fff;padding:19px;border-radius:10px;box-shadow:0 2px 10px #e6e7fa;width:350px;margin:22px auto;}
#addForm input, #addForm select{width:99%;padding:7px;margin-bottom:7px;border-radius:6px;border:1px solid #ccc;}
#producerDetails{margin-top:18px;padding:15px;border-radius:13px;box-shadow:0 2px 10px #dee0f9;background:#fff;color:#222;display:none;}
</style>
</head>
<body>

<div class="navbar">Admin Dashboard - Manage Producers</div>

<div class="container">
  <!-- Sidebar -->
  <div class="sidebar">
    <label>Add New Producer</label>
    <button onclick="showAddForm()">Add Producer</button>
    <label for="categoryFilter">Filter by Category:</label>
    <select id="categoryFilter" onchange="renderTable()">
      <option value="all">All</option>
      <option value="Tailor">Tailor</option>
      <option value="Mehendi Artist">Mehendi Artist</option>
      <option value="Beautician">Beautician</option>
      <option value="Household Labour">Household Labour</option>
      <option value="Food Catering">Food Catering</option>
    </select>
  </div>

  <!-- Main -->
  <div style="flex:1;">
    <table id="producerTable">
      <thead>
        <tr>
          <th>Name</th><th>Category</th><th>Price/hr</th><th>Location</th><th>Distance</th><th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Add Producer Form -->
    <div id="addForm">
      <h3 style="color:#5f64ec;text-align:center;">Add New Producer</h3>
      <input type="text" id="addName" placeholder="Name">
      <select id="addCategory">
        <option value="">Select Category</option>
        <option value="Tailor">Tailor</option>
        <option value="Mehendi Artist">Mehendi Artist</option>
        <option value="Beautician">Beautician</option>
        <option value="Household Labour">Household Labour</option>
        <option value="Food Catering">Food Catering</option>
      </select>
      <input type="number" id="addPrice" placeholder="Price/hr">
      <input type="text" id="addLoc" placeholder="Location">
      <input type="number" step="0.01" id="addDist" placeholder="Distance (km)">
      <button onclick="addProducer()">Add</button>
      <button style="background:#c9184a;" onclick="hideAddForm()">Cancel</button>
    </div>

    <!-- Producer Details -->
    <div id="producerDetails"></div>
  </div>
</div>

<script>
// Initial data if none in localStorage
if(!localStorage.getItem("producers")){
  const initial = [
    {name:"Aisha Tailor",category:"Tailor",price:350,location:"Delhi",dist:1.2},
    {name:"Raj Sharma",category:"Tailor",price:400,location:"Mumbai",dist:2.0},
    {name:"Simran Mehendi",category:"Mehendi Artist",price:500,location:"Jaipur",dist:1.1},
    {name:"Nisha Beauty",category:"Beautician",price:400,location:"Mumbai",dist:1.5},
    {name:"Vinod Kumar",category:"Household Labour",price:250,location:"Delhi",dist:2.7},
    {name:"Raj Catering",category:"Food Catering",price:600,location:"Delhi",dist:1.0}
  ];
  localStorage.setItem("producers", JSON.stringify(initial));
}
let producers = JSON.parse(localStorage.getItem("producers"));

function renderTable(){
  const filter = document.getElementById("categoryFilter").value;
  const tbody = document.querySelector("#producerTable tbody");
  tbody.innerHTML = "";
  producers.filter(p=>filter==="all"||p.category===filter)
    .forEach((p,i)=>{
      tbody.innerHTML += `
        <tr>
          <td>${p.name}</td>
          <td>${p.category}</td>
          <td>₹${p.price}</td>
          <td>${p.location}</td>
          <td>${p.dist} km</td>
          <td>
            <select class="actionSelect" onchange="handleAction(this.value,${i})">
              <option value="">Actions</option>
              <option value="view">Select/View</option>
              <option value="edit">Edit</option>
              <option value="delete">Delete</option>
            </select>
          </td>
        </tr>
      `;
  });
}
renderTable();

function showAddForm(){document.getElementById("addForm").style.display="block";}
function hideAddForm(){document.getElementById("addForm").style.display="none";}

function addProducer(){
  let name = document.getElementById("addName").value.trim();
  let category = document.getElementById("addCategory").value;
  let price = parseInt(document.getElementById("addPrice").value) || 0;
  let loc = document.getElementById("addLoc").value.trim();
  let dist = parseFloat(document.getElementById("addDist").value) || 0;
  if(!name || !category || !loc){alert("Please fill all fields!"); return;}
  producers.push({name,category,price,location:loc,dist});
  localStorage.setItem("producers", JSON.stringify(producers));
  hideAddForm(); renderTable();
}

function handleAction(action,index){
  if(action==="view"){ viewProducer(index); }
  else if(action==="edit"){ editProducer(index); }
  else if(action==="delete"){ deleteProducer(index); }
  document.querySelectorAll('.actionSelect')[index].value = "";
}

function viewProducer(index){
  const p = producers[index];
  const details = document.getElementById("producerDetails");
  details.style.display="block";
  details.innerHTML = `
    <h4 style="color:#5f64ec;margin-top:0;">${p.name}</h4>
    <strong>Category:</strong> ${p.category}<br>
    <strong>Price/hr:</strong> ₹${p.price}<br>
    <strong>Location:</strong> ${p.location}<br>
    <strong>Distance:</strong> ${p.dist} km
  `;
}

function editProducer(index){
  const p = producers[index];
  let newName = prompt("Edit Name:", p.name);
  if(newName) p.name = newName;
  let newCategory = prompt("Edit Category:", p.category);
  if(newCategory) p.category = newCategory;
  let newPrice = prompt("Edit Price/hr:", p.price);
  if(newPrice) p.price = parseInt(newPrice);
  let newLoc = prompt("Edit Location:", p.location);
  if(newLoc) p.location = newLoc;
  let newDist = prompt("Edit Distance (km):", p.dist);
  if(newDist) p.dist = parseFloat(newDist);
  localStorage.setItem("producers", JSON.stringify(producers));
  renderTable();
  document.getElementById("producerDetails").style.display = "none";
}

function deleteProducer(index){
  if(confirm("Delete this producer?")){
    producers.splice(index,1);
    localStorage.setItem("producers", JSON.stringify(producers));
    renderTable();
    document.getElementById("producerDetails").style.display = "none";
  }
}
</script>
</body>
</html>